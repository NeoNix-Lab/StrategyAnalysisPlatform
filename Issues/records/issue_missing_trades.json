{
    "title": "Incomplete Trade Persistence: Not All Trades Are Saved",
    "body": "# Incomplete Trade Persistence\n\n## Issue Description\nThe user has reported that not all trades generated by the strategy are being correctly saved to the database. There appears to be a discrepancy between the executions/orders sent and the final `Trades` table records.\n\n## Potential Causes\n- **Database Locking**: High concurrency during batch ingestion might be causing silent failures or rollbacks if the retry logic (recently added) was not present or sufficient during previous runs.\n- **Reconstruction Failures**: The `TradeBuilder` logic might be skipping certain execution patterns (e.g. partial fills, complex OCOs) resulting in unclosed or unformed trades.\n- **Race Conditions**: `rebuild_trades_task` might be reading data before the transaction of the batch insert is fully visible/committed in some edge cases (though SQLite WAL should help).\n\n## Action Items\n1. Verify if the recent 'WAL Mode' and 'Retry Logic' fixes resolved this for *future* runs.\n2. Investigate logs for `Error rebuilding trades` or `IntegrityError`.\n3. Add more robust validation to ensure `Executions` count matches `Trades` implied volume.\n4. Check for 'Orphaned Executions' queries to identify data gaps.",
    "labels": [
        "bug",
        "backend",
        "database",
        "data-integrity",
        "critical"
    ],
    "assignees": []
}