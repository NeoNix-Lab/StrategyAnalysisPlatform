{
  "event": "issues",
  "action": "closed",
  "repository": "NeoNix-Lab/StrategyAnalysisPlatform",
  "sender": "NeoNix-Lab",
  "event_timestamp": "2026-01-06T06:59:00.812309Z",
  "issue": {
    "number": 19,
    "title": "Incomplete Trade Persistence: Not All Trades Are Saved",
    "body": "# Incomplete Trade Persistence\n\n**Related to**: Missing UI Notifications for Data Ingestion Status (The lack of feedback makes it hard to distinguish between 'missing data' and 'data not yet arrived').\n\n## Issue Description\nThe user has reported that not all trades generated by the strategy are being correctly saved to the database. There appears to be a discrepancy between the executions/orders sent and the final `Trades` table records.\n\n## Potential Causes\n- **Database Locking**: High concurrency during batch ingestion might be causing silent failures or rollbacks if the retry logic (recently added) was not present or sufficient during previous runs.\n- **Reconstruction Failures**: The `TradeBuilder` logic might be skipping certain execution patterns (e.g. partial fills, complex OCOs) resulting in unclosed or unformed trades.\n- **Race Conditions**: `rebuild_trades_task` might be reading data before the transaction of the batch insert is fully visible/committed in some edge cases (though SQLite WAL should help).\n\n## Action Items\n1. Verify if the recent 'WAL Mode' and 'Retry Logic' fixes resolved this for *future* runs.\n2. Investigate logs for `Error rebuilding trades` or `IntegrityError`.\n3. Add more robust validation to ensure `Executions` count matches `Trades` implied volume.\n4. Check for 'Orphaned Executions' queries to identify data gaps.",
    "state": "closed",
    "html_url": "https://github.com/NeoNix-Lab/StrategyAnalysisPlatform/issues/19",
    "labels": [
      "bug",
      "backend",
      "database",
      "data-integrity",
      "critical"
    ],
    "assignees": [],
    "created_at": "2025-12-20T12:39:00Z",
    "updated_at": "2026-01-06T06:58:50Z",
    "closed_at": "2026-01-06T06:58:49Z"
  }
}